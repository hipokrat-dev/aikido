<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kim Siyah KuÅŸak Olmak Ä°ster? Aikido felsefesi Ã¼zerine kurulu interaktif bilgi yarÄ±ÅŸmasÄ±.">
    <title>Kim Siyah KuÅŸak Olmak Ä°ster: AÄ°KÄ°DO</title>
    
    <!-- Tailwind CSS ve Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            overflow-x: hidden;
        }
        .dojo-overlay {
            background: linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.95)), 
                        url('https://images.unsplash.com/photo-1555597673-b21d5c935865?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            position: fixed;
            inset: 0;
            z-index: -1;
        }
        .title-font { font-family: 'Permanent Marker', cursive; }
        .belt-node { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .option-btn {
            background: rgba(30, 41, 59, 0.9);
            border: 2px solid #475569;
            color: #f8fafc;
            transition: all 0.2s;
            width: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
            min-height: 55px;
            outline: none !important;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .option-btn:hover:not(:disabled) {
            background: rgba(51, 65, 85, 1);
            border-color: #fbbf24;
            transform: translateY(-2px);
        }
        /* ÅÄ±klar seÃ§ilmeden Ã¶nce iÅŸaret belirlemesini engelleyen kural */
        .option-btn:focus, .option-btn:active {
            outline: none !important;
            box-shadow: none !important;
        }

        .correct { background-color: #059669 !important; border-color: #10b981 !important; }
        .wrong { background-color: #dc2626 !important; border-color: #ef4444 !important; }
        
        #message-box {
            transform: translate(-50%, -120%);
            transition: transform 0.3s ease-out;
            left: 50%;
        }
        #message-box.active {
            transform: translate(-50%, 0);
        }

        .joker-locked { opacity: 0.3; cursor: not-allowed; }
        .joker-active { animation: glow 2s infinite; }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #a855f7; }
            50% { box-shadow: 0 0 15px #a855f7; }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="dojo-overlay"></div>

    <!-- Mesaj Paneli -->
    <div id="message-box" class="fixed top-10 z-[60] w-full max-w-md bg-indigo-900 border-2 border-indigo-400 p-4 rounded-2xl shadow-2xl flex items-center gap-4">
        <div class="text-3xl">â›©ï¸</div>
        <div class="flex-1">
            <p id="message-label" class="text-xs font-bold text-indigo-300 uppercase tracking-tighter">Sensei Ã–ÄŸÃ¼dÃ¼</p>
            <p id="message-text" class="text-sm font-medium italic text-slate-200"></p>
        </div>
        <button onclick="hideSenseiMessage()" class="text-indigo-300 hover:text-white text-xl font-bold">âœ•</button>
    </div>

    <!-- GiriÅŸ EkranÄ± -->
    <div id="intro-screen" class="max-w-3xl w-full bg-slate-900/90 backdrop-blur-xl border border-slate-700 rounded-3xl p-8 shadow-2xl flex flex-col gap-6 text-center animate-fadeIn">
        <div>
            <h1 class="title-font text-4xl text-amber-500 mb-2 uppercase tracking-tighter">Kim Siyah KuÅŸak Olmak Ä°ster?</h1>
            <p class="text-slate-400 tracking-widest font-bold uppercase text-xs">Aikido UstalÄ±k Yolu</p>
            <p class="text-amber-600/80 text-[10px] mt-2 uppercase font-bold tracking-widest">Kurucu: Morihei Ueshiba (O-Sensei)</p>
        </div>

        <div class="p-6 bg-slate-800/40 rounded-2xl border border-slate-700 text-center italic">
            <p id="intro-quote" class="text-slate-300 text-base leading-relaxed"></p>
            <p id="intro-quote-author" class="text-amber-500 text-[10px] mt-2 font-bold uppercase tracking-widest"></p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-left">
            <div class="bg-slate-800/40 p-4 rounded-xl border border-slate-700">
                <h3 class="text-amber-400 font-bold text-xs mb-1 uppercase tracking-wider">ğŸ“œ SÄ±nav KurallarÄ±</h3>
                <p class="text-[11px] text-slate-400 leading-relaxed">Her kuÅŸak iÃ§in 10 soruluk bir sÄ±navÄ± hatasÄ±z tamamlamanÄ±z gerekir. Sensei her soruda yanÄ±nÄ±zdadÄ±r.</p>
            </div>
            <div class="bg-slate-800/40 p-4 rounded-xl border border-slate-700">
                <h3 class="text-amber-400 font-bold text-xs mb-1 uppercase tracking-wider">ğŸ¥‹ Bilgi Yolu</h3>
                <p class="text-[11px] text-slate-400 leading-relaxed">YanlÄ±ÅŸ cevap yolu keser. DoÄŸru tekniÄŸi bulana kadar en baÅŸa dÃ¶nerek zihninizi tazelemeniz istenir.</p>
            </div>
        </div>

        <button onclick="game.start()" class="bg-amber-500 text-slate-900 font-black py-4 rounded-2xl hover:bg-amber-400 transition transform hover:scale-105 shadow-xl uppercase tracking-widest">YolculuÄŸa BaÅŸla</button>
    </div>

    <!-- Oyun EkranÄ± -->
    <div id="game-app" class="hidden max-w-4xl w-full bg-slate-900/60 backdrop-blur-2xl border border-slate-700 rounded-3xl p-6 md:p-10 shadow-2xl relative">
        <header class="text-center mb-8">
            <h1 class="title-font text-3xl md:text-5xl text-amber-500 drop-shadow-md">AÄ°KÄ°DO SINAVI</h1>
        </header>

        <div class="mb-8">
            <div class="flex flex-wrap justify-center gap-2 md:gap-3" id="belt-tracker"></div>
            <div class="mt-4 h-1.5 bg-slate-800 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-amber-500 transition-all duration-700" style="width: 0%"></div>
            </div>
        </div>

        <main class="space-y-6">
            <div class="bg-slate-800/90 p-6 rounded-2xl border-l-8 border-amber-500 relative shadow-inner">
                <div id="belt-tag" class="inline-block px-3 py-1 rounded text-[10px] font-black uppercase mb-3"></div>
                <button onclick="game.showPhilosophyHint()" class="absolute top-4 right-4 bg-amber-500/10 hover:bg-amber-500/30 p-2 rounded-full transition text-amber-400 border border-amber-500/20 shadow-lg" title="Felsefi Ä°pucu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>
                </button>
                <h2 id="question-text" class="text-lg md:text-xl font-medium leading-relaxed"></h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="options-grid"></div>
        </main>

        <footer class="mt-8 flex flex-wrap justify-center gap-4 border-t border-slate-800 pt-6">
            <button id="joker-sensei" onclick="game.useSensei()" class="bg-indigo-700 hover:bg-indigo-600 px-8 py-3 rounded-xl text-xs font-bold shadow-lg transition-all focus:outline-none">â›©ï¸ Sensei Tavsiyesi</button>
            <button id="joker-50" onclick="game.use5050()" class="bg-purple-700 px-8 py-3 rounded-xl text-xs font-bold transition flex flex-col items-center shadow-lg focus:outline-none">
                <span>â˜¯ï¸ 50:50</span>
                <span id="joker-unlock-text" class="text-[8px] font-normal italic">Kilitli</span>
            </button>
        </footer>

        <div class="absolute top-4 right-6 text-slate-500 font-mono text-[10px] uppercase tracking-widest">
            Seri: <span id="streak-val" class="text-amber-500 font-bold">0</span>
        </div>
    </div>

    <!-- SonuÃ§ / Hata EkranÄ± -->
    <div id="overlay" class="hidden fixed inset-0 bg-black/95 backdrop-blur-md z-[100] flex items-center justify-center p-6 text-center">
        <div class="bg-slate-900 border-2 border-amber-500 p-8 rounded-3xl max-w-xl w-full shadow-2xl flex flex-col items-center">
            <div id="modal-icon" class="text-6xl mb-4">ğŸ†</div>
            <h2 id="modal-title" class="title-font text-3xl text-amber-500 mb-4 uppercase"></h2>
            
            <div id="wrong-answer-details" class="hidden w-full mb-6 p-5 bg-red-950/30 border border-red-500/30 rounded-xl text-left text-sm space-y-2">
                <p class="text-slate-400 italic">Sizin CevabÄ±nÄ±z:</p>
                <p id="user-ans-text" class="text-red-400 font-bold mb-2"></p>
                <p class="text-slate-400 italic">DoÄŸru Cevap:</p>
                <p id="correct-ans-text" class="text-green-400 font-bold"></p>
            </div>

            <div id="quote-box" class="mb-6 p-5 bg-slate-800/40 rounded-xl border-l-4 border-indigo-500 italic text-slate-300 text-sm">
                <p id="modal-quote-res"></p>
                <p id="modal-quote-author-res" class="text-[10px] mt-2 text-indigo-400 font-bold uppercase"></p>
            </div>

            <p id="modal-desc" class="text-slate-400 mb-8 text-sm leading-relaxed"></p>
            
            <button onclick="game.resetToStart()" class="bg-amber-500 text-slate-900 font-black px-12 py-4 rounded-full hover:scale-105 transition-all shadow-xl uppercase tracking-widest text-xs">
                TAMAM
            </button>
        </div>
    </div>

    <script>
        const AIKIDO_PHILOSOPHY = [
            "Zihnini su gibi yap; kaba gÃ¶re ÅŸekil al ama Ã¶zÃ¼nÃ¼ asla kaybetme.",
            "SaldÄ±rganÄ±n gÃ¼cÃ¼nÃ¼ ona karÅŸÄ± deÄŸil, onunla birlikte kullan.",
            "GerÃ§ek zafer, bir baÅŸkasÄ±nÄ± yenmek deÄŸil, kendi ego ve korkularÄ±nÄ± aÅŸmaktÄ±r.",
            "Aikido bir dÃ¶vÃ¼ÅŸ sanatÄ± deÄŸil, evrensel sevgiyi ve barÄ±ÅŸÄ± koruma yoludur.",
            "Merkezini bulduÄŸun an, dÃ¼nyanÄ±n sarsÄ±ntÄ±sÄ± seni etkilemez.",
            "Bir teknik fiziksel bir hareketten fazlasÄ±dÄ±r; o, ruhun bir yansÄ±masÄ±dÄ±r.",
            "Uyum (Ai), sadece rakiple deÄŸil, evrenin akÄ±ÅŸÄ±yla bir olmaktÄ±r.",
            "EÄŸer zihnin esnekse, bedenin de esnektir. Sertlik kÄ±rÄ±lmaya mahkumdur.",
            "Aikido'da dÃ¼ÅŸmek bir baÅŸarÄ±sÄ±zlÄ±k deÄŸil, yeniden ayaÄŸa kalkma sanatÄ±dÄ±r.",
            "SaldÄ±rÄ± bir enerjidir; onu reddetme, sadece yÃ¶nÃ¼nÃ¼ deÄŸiÅŸtir."
        ];

        const AIKIDO_QUOTES = [
            { text: "GerÃ§ek zafer, kendine karÅŸÄ± kazanÄ±lan zaferdir.", author: "Morihei Ueshiba" },
            { text: "DÃ¼ÅŸmek sorun deÄŸil, her seferinde daha gÃ¼Ã§lÃ¼ ayaÄŸa kalkmak Ã¶nemlidir.", author: "Dojo BilgeliÄŸi" },
            { text: "Zihnini su gibi yap; formsuz ve her ÅŸeye uyumlu.", author: "Budo Felsefesi" },
            { text: "Hatalar, mÃ¼kemmelliÄŸe giden yolun taÅŸlarÄ±dÄ±r.", author: "O-Sensei" },
            { text: "Yolun kendisi hedeftir. Her adÄ±m bir Ã¶ÄŸretidir.", author: "Zen Ã–ÄŸretisi" }
        ];

        const QUESTION_POOL = [
            { name: "Beyaz KuÅŸak", class: "belt-white", pool: [
                { q: "Aikido'nun kurucusu Morihei Ueshiba'ya hitap ÅŸekli nedir?", options: ["Soke", "O-Sensei", "Doshu", "Shihan"], correct: 1 },
                { q: "Aikido kelimesindeki 'Ai' ne anlama gelir?", options: ["Uyum / Sevgi", "Enerji", "Yol", "SavaÅŸ"], correct: 0 },
                { q: "Aikido kelimesindeki 'Ki' neyi temsil eder?", options: ["Beden", "Yol", "Ruhsal Enerji", "GÃ¼Ã§"], correct: 2 },
                { q: "Aikido kelimesindeki 'Do' ne demektir?", options: ["SaldÄ±rÄ±", "Disiplinli Yol", "Minder", "Savunma"], correct: 1 },
                { q: "Dojo'da antrenmana baÅŸlarken sÃ¶ylenen rica sÃ¶zÃ¼ nedir?", options: ["Arigato", "Onegai Shimasu", "Hajime", "Rei"], correct: 1 },
                { q: "Antrenman bitiÅŸinde sÃ¶ylenen teÅŸekkÃ¼r sÃ¶zÃ¼ nedir?", options: ["Sayonara", "Domo Arigato Gozaimashita", "Hajime", "Osu"], correct: 1 },
                { q: "Aikido minderine (geleneksel Japon minderi) ne denir?", options: ["Futon", "Tatami", "Zazen", "Shikko"], correct: 1 },
                { q: "Antrenman yapÄ±lan ve 'Yolun Ã§alÄ±ÅŸÄ±ldÄ±ÄŸÄ± yer' anlamÄ±na gelen mekan?", options: ["Ring", "Salon", "Dojo", "Minder"], correct: 2 },
                { q: "Dojo'nun Ã¶n tarafÄ±na (kurucunun resminin olduÄŸu yer) ne denir?", options: ["Shimoza", "Kamiza", "Joseki", "Shimoseki"], correct: 1 },
                { q: "Dizler Ã¼zerinde geleneksel oturuÅŸa ne denir?", options: ["Agura", "Seiza", "Kamae", "Mokuso"], correct: 1 },
                { q: "Zihni sakinleÅŸtirme meditasyonuna ne denir?", options: ["Mokuso", "Zazen", "Kiai", "Rei"], correct: 0 },
                { q: "Aikido'da eÄŸilerek yapÄ±lan selamlama eylemine ne denir?", options: ["Hajime", "Rei", "Yame", "Mawate"], correct: 1 },
                { q: "Beyaz kuÅŸaÄŸÄ±n simgelediÄŸi temel kavram nedir?", options: ["UstalÄ±k", "BaÅŸlangÄ±Ã§ / SaflÄ±k", "Tehlike", "Olgunluk"], correct: 1 },
                { q: "Aikido'da bele baÄŸlanan kemere ne ad verilir?", options: ["Himo", "Obi", "Zori", "Gi"], correct: 1 },
                { q: "Aikido'nun kurucusu O-Sensei'nin yaÅŸadÄ±ÄŸÄ± manevi merkez neresidir?", options: ["Tokyo", "Kyoto", "Iwama", "Osaka"], correct: 2 }
            ]},
            { name: "SarÄ± KuÅŸak", class: "belt-yellow", pool: [
                { q: "Aikido'da 'hazÄ±r duruÅŸ' haline ne denir?", options: ["Seiza", "Kamae", "Ukemi", "Tandem"], correct: 1 },
                { q: "SaÄŸ ayak Ã¶nde yapÄ±lan duruÅŸa ne ad verilir?", options: ["Hidari Hanmi", "Migi Hanmi", "Kamae", "Seiza"], correct: 1 },
                { q: "Sol ayak Ã¶nde yapÄ±lan duruÅŸa ne ad verilir?", options: ["Migi Hanmi", "Hidari Hanmi", "Seiza", "Kamae"], correct: 1 },
                { q: "Dizler Ã¼zerinde yapÄ±lan yÃ¼rÃ¼yÃ¼ÅŸ tekniÄŸi nedir?", options: ["Irimi", "Tenkan", "Shikko", "Tsugi-ashi"], correct: 2 },
                { q: "Bedeni yere gÃ¼venle bÄ±rakma/dÃ¼ÅŸÃ¼ÅŸ tekniklerinin genel adÄ±?", options: ["Nage", "Ukemi", "Kamae", "Kuzushi"], correct: 1 },
                { q: "Ã–ne doÄŸru yuvarlanarak yapÄ±lan dÃ¼ÅŸÃ¼ÅŸ hangisidir?", options: ["Mae Ukemi", "Ushiro Ukemi", "Yoko Ukemi", "Tobu Ukemi"], correct: 0 },
                { q: "Geriye doÄŸru yuvarlanarak yapÄ±lan dÃ¼ÅŸÃ¼ÅŸ hangisidir?", options: ["Mae Ukemi", "Ushiro Ukemi", "Yoko Ukemi", "Sutemi"], correct: 1 },
                { q: "Yana doÄŸru yapÄ±lan dÃ¼ÅŸÃ¼ÅŸe ne denir?", options: ["Yoko Ukemi", "Mae Ukemi", "Ushiro Ukemi", "Tobu Ukemi"], correct: 0 },
                { q: "DoÄŸrudan rakibin iÃ§ine giriÅŸ adÄ±mÄ±na ne denir?", options: ["Irimi", "Tenkan", "Ura", "Omote"], correct: 0 },
                { q: "180 derece dÃ¶nerek yapÄ±lan yÃ¶n deÄŸiÅŸtirme adÄ±mÄ±?", options: ["Irimi", "Tenkan", "Kaiten", "Shikko"], correct: 1 },
                { q: "SaldÄ±rgan (tekniÄŸi alan) kiÅŸiye ne ad verilir?", options: ["Nage", "Uke", "Sensei", "Tori"], correct: 1 },
                { q: "SavunmacÄ± (fÄ±rlatan) kiÅŸiye ne ad verilir?", options: ["Uke", "Nage", "Kohai", "Shihan"], correct: 1 },
                { q: "KarÅŸÄ±lÄ±klÄ± aynÄ± ayaklarÄ±n Ã¶nde olduÄŸu uyumlu duruÅŸ?", options: ["Ai-hanmi", "Gyaku-hanmi", "Kamae", "Seiza"], correct: 0 },
                { q: "KarÅŸÄ±lÄ±klÄ± zÄ±t ayaklarÄ±n Ã¶nde olduÄŸu duruÅŸ?", options: ["Ai-hanmi", "Gyaku-hanmi", "Seiza", "Kamae"], correct: 1 },
                { q: "Dojo dÄ±ÅŸÄ±nda giyilen geleneksel terlik?", options: ["Zori", "Tabi", "Geta", "Uwabaki"], correct: 0 }
            ]},
            { name: "Turuncu KuÅŸak", class: "belt-orange", pool: [
                { q: "Birinci kontrol Ã¶ÄŸretisi (kol sabitleme) hangisidir?", options: ["Nikyo", "Sankyo", "Ikkyo", "Yonkyo"], correct: 2 },
                { q: "Ä°kinci kontrol Ã¶ÄŸretisi (bilek bÃ¼kme) hangisidir?", options: ["Ikkyo", "Nikyo", "Sankyo", "Yonkyo"], correct: 1 },
                { q: "ÃœÃ§Ã¼ncÃ¼ kontrol Ã¶ÄŸretisi (spiral bilek bÃ¼kme) hangisidir?", options: ["Ikkyo", "Nikyo", "Sankyo", "Yonkyo"], correct: 2 },
                { q: "DÃ¶rdÃ¼ncÃ¼ kontrol Ã¶ÄŸretisi (sinir noktasÄ±na baskÄ±)?", options: ["Ikkyo", "Nikyo", "Sankyo", "Yonkyo"], correct: 3 },
                { q: "BileÄŸi dÄ±ÅŸarÄ± bÃ¼kerek yapÄ±lan fÄ±rlatma tekniÄŸi?", options: ["Kotegaeshi", "Shihonage", "Iriminage", "Kaitennage"], correct: 0 },
                { q: "DÃ¶rt yÃ¶n fÄ±rlatÄ±ÅŸÄ± anlamÄ±na gelen teknik?", options: ["Shihonage", "Iriminage", "Kotegaeshi", "Tenchinage"], correct: 0 },
                { q: "Ä°Ã§eri girerek boyun Ã¼zerinden fÄ±rlatma tekniÄŸi?", options: ["Shihonage", "Iriminage", "Tenchinage", "Kokyunage"], correct: 1 },
                { q: "TekniÄŸin vÃ¼cudun Ã¶nÃ¼nden uygulanma biÃ§imi?", options: ["Ura", "Omote", "Irimi", "Tenkan"], correct: 1 },
                { q: "TekniÄŸin vÃ¼cudun arkasÄ±ndan (dÃ¶nerek) uygulama biÃ§imi?", options: ["Omote", "Ura", "Tenkan", "Irimi"], correct: 1 },
                { q: "Rakibin dengesinin bozulmasÄ±na ne ad verilir?", options: ["Kuzushi", "Zanshin", "Kiai", "Ma-ai"], correct: 0 },
                { q: "128 cm uzunluÄŸundaki ahÅŸap asaya ne denir?", options: ["Bokken", "Tanto", "Jo", "Katana"], correct: 2 },
                { q: "EtkisizleÅŸtirme veya ÅŸaÅŸÄ±rtma vuruÅŸuna ne denir?", options: ["Atemi", "Kiai", "Ukemi", "Suburi"], correct: 0 },
                { q: "DoÄŸrudan yukarÄ±dan aÅŸaÄŸÄ±ya (alna) vuruÅŸ?", options: ["Yokomenuchi", "Shomenuchi", "Tsuki", "Keri"], correct: 1 },
                { q: "ÅakaÄŸa doÄŸru yapÄ±lan yan vuruÅŸ?", options: ["Shomenuchi", "Yokomenuchi", "Tsuki", "Atemi"], correct: 1 },
                { q: "Ä°leriye doÄŸru yapÄ±lan yumruk saldÄ±rÄ±sÄ±?", options: ["Tsuki", "Shomenuchi", "Yokomenuchi", "Geri"], correct: 0 }
            ]},
            { name: "YeÅŸil KuÅŸak", class: "belt-green", pool: [
                { q: "Dairesel dÃ¶nÃ¼ÅŸle yapÄ±lan fÄ±rlatma tekniÄŸi?", options: ["Kaitennage", "Iriminage", "Shihonage", "Tenchinage"], correct: 0 },
                { q: "GÃ¶k-Yer fÄ±rlatÄ±ÅŸÄ± anlamÄ±na gelen teknik?", options: ["Tenchinage", "Kokyunage", "Koshinage", "Iriminage"], correct: 0 },
                { q: "Nefes gÃ¼cÃ¼ ile yapÄ±lan fÄ±rlatmalara ne denir?", options: ["Kokyunage", "Shihonage", "Tenchinage", "Koshinage"], correct: 0 },
                { q: "KalÃ§a Ã¼zerinden yapÄ±lan fÄ±rlatma tekniÄŸi?", options: ["Koshinage", "Iriminage", "Kokyunage", "Tenchinage"], correct: 0 },
                { q: "FÄ±rlatma tekniklerinin genel kategorisi?", options: ["Katame-waza", "Nage-waza", "Atemi-waza", "Uke-waza"], correct: 1 },
                { q: "Kilitleme tekniklerinin genel kategorisi?", options: ["Nage-waza", "Katame-waza", "Suburi", "Kata"], correct: 1 },
                { q: "Oturarak yapÄ±lan Ã§alÄ±ÅŸmalarÄ±n genel adÄ±?", options: ["Tachi-waza", "Suwari-waza", "Hanmi-handachi", "Randori"], correct: 1 },
                { q: "Ayakta yapÄ±lan Ã§alÄ±ÅŸmalarÄ±n genel adÄ±?", options: ["Suwari-waza", "Tachi-waza", "Hanmi-handachi", "Randori"], correct: 1 },
                { q: "Bir tarafÄ±n ayakta bir tarafÄ±n oturur olduÄŸu teknikler?", options: ["Hanmi-handachi", "Tachi-waza", "Suwari-waza", "Kata"], correct: 0 },
                { q: "AhÅŸap bÄ±Ã§ak maketi ile yapÄ±lan Ã§alÄ±ÅŸmalara ne denir?", options: ["Jo-dori", "Tanto-dori", "Bokken-dori", "Kumi-tachi"], correct: 1 },
                { q: "Minderdeki mesafe yÃ¶netimine ne denir?", options: ["Zanshin", "Ma-ai", "Kuzushi", "Hara"], correct: 1 },
                { q: "Ruhun Ã§Ä±ÄŸlÄ±ÄŸÄ± olarak bilinen sesli enerji Ã§Ä±kÄ±ÅŸÄ±?", options: ["Kiai", "Atemi", "Mokuso", "Misogi"], correct: 0 },
                { q: "Denge ve enerji merkezi (karÄ±n altÄ± bÃ¶lge)?", options: ["Tandem / Hara", "Kiai", "Kokyu", "Zanshin"], correct: 0 },
                { q: "Tek el bilek kavrama saldÄ±rÄ±sÄ±na ne denir?", options: ["Katatedori", "Ushirodori", "Shomenuchi", "Yokomenuchi"], correct: 0 },
                { q: "Arkadan yapÄ±lan kavrama saldÄ±rÄ±larÄ±na ne denir?", options: ["Katatedori", "Ushirodori", "Munadori", "Kubishime"], correct: 1 }
            ]},
            { name: "Mavi KuÅŸak", class: "belt-blue", pool: [
                { q: "AhÅŸap kÄ±lÄ±Ã§ (Bokken) tekniklerine ne ad verilir?", options: ["Aiki-Ken", "Aiki-Jo", "Taijutsu", "Iaijutsu"], correct: 0 },
                { q: "AhÅŸap asa (Jo) tekniklerine ne ad verilir?", options: ["Aiki-Ken", "Aiki-Jo", "Taijutsu", "Kenjutsu"], correct: 1 },
                { q: "SilahsÄ±z Aikido tekniklerinin genel adÄ±?", options: ["Aiki-Ken", "Aiki-Jo", "Taijutsu", "Budo"], correct: 2 },
                { q: "EÅŸli kÄ±lÄ±Ã§ (Bokken) Ã§alÄ±ÅŸmalarÄ±na ne denir?", options: ["Kumi-tachi", "Kumi-jo", "Suburi", "Kata"], correct: 0 },
                { q: "EÅŸli asa (Jo) Ã§alÄ±ÅŸmalarÄ±na ne denir?", options: ["Kumi-tachi", "Kumi-jo", "Suburi", "Kata"], correct: 1 },
                { q: "BeÅŸinci kontrol Ã¶ÄŸretisi (genelde bÄ±Ã§aÄŸa karÅŸÄ±)?", options: ["Gokyo", "Yonkyo", "Sankyo", "Nikyo"], correct: 0 },
                { q: "Ã‡oklu saldÄ±rgana karÅŸÄ± yapÄ±lan serbest savunma?", options: ["Kata", "Suburi", "Randori", "Embu"], correct: 2 },
                { q: "Aikido teknik gÃ¶sterisine ne ad verilir?", options: ["Embu", "Kata", "Randori", "Shiai"], correct: 0 },
                { q: "KÄ±lÄ±Ã§ Ã§ekme ve kÄ±nÄ±na koyma sanatÄ±na ne denir?", options: ["Iaijutsu", "Kenjutsu", "Jujutsu", "Bojutsu"], correct: 0 },
                { q: "Bileklerin Ã§apraz kavranmasÄ±na ne ad verilir?", options: ["Kosadori", "Katatedori", "Ryotedori", "Ushirodori"], correct: 0 },
                { q: "Ä°ki bileÄŸin aynÄ± anda kavranmasÄ±na ne denir?", options: ["Ryotedori", "Katatedori", "Kosadori", "Ushirodori"], correct: 0 },
                { q: "Omuz bÃ¶lgesinden kavramaya ne denir?", options: ["Katadori", "Munadori", "Ryotedori", "Ushirodori"], correct: 0 },
                { q: "Yaka/GÃ¶ÄŸÃ¼s bÃ¶lgesinden kavramaya ne denir?", options: ["Munadori", "Katadori", "Kubishime", "Ushirodori"], correct: 0 },
                { q: "Boyun sÄ±kma saldÄ±rÄ±sÄ±na ne ad verilir?", options: ["Kubishime", "Munadori", "Katadori", "Ushirodori"], correct: 0 },
                { q: "Tek kolun her iki el ile kavranmasÄ±?", options: ["Morotedori", "Katatedori", "Ryotedori", "Ushirodori"], correct: 0 }
            ]},
            { name: "Kahverengi KuÅŸak", class: "belt-brown", pool: [
                { q: "Samuray geleneÄŸi olan 7 pileli pantolonun adÄ±?", options: ["Kimono", "Hakama", "Yukata", "Keikogi"], correct: 1 },
                { q: "Hakama'nÄ±n 'YardÄ±mseverlik' temsil eden pilesi hangisidir?", options: ["Cesaret", "Jin", "Rei", "Shin"], correct: 1 },
                { q: "Hakama'nÄ±n 'Adalet' temsil eden pilesi hangisidir?", options: ["Gi", "Onur", "GÃ¶rev", "Bilgelik"], correct: 0 },
                { q: "Hakama'nÄ±n 'SaygÄ±' temsil eden pilesi hangisidir?", options: ["GÃ¼Ã§", "Rei", "Zeka", "HÄ±z"], correct: 1 },
                { q: "Hakama'nÄ±n 'Samimiyet' temsil eden pilesi hangisidir?", options: ["Shin", "Cesaret", "Adalet", "Onur"], correct: 0 },
                { q: "ArÄ±nma ve temizlenme ritÃ¼eline ne ad verilir?", options: ["Misogi", "Mokuso", "Zanshin", "Satori"], correct: 0 },
                { q: "Sizden kÄ±demli Ã¶ÄŸrencilere ne ad verilir?", options: ["Kohai", "Sempai", "Sensei", "Shihan"], correct: 1 },
                { q: "Sizden yeni Ã¶ÄŸrencilere ne ad verilir?", options: ["Sempai", "Kohai", "Sensei", "Doshu"], correct: 1 },
                { q: "Siyah kuÅŸak Ã¶ncesi son derece hangisidir?", options: ["6. Kyu", "1. Kyu", "1. Dan", "Beyaz"], correct: 1 },
                { q: "TekniÄŸin karÅŸÄ± tarafa Ã§evrilerek uygulanmasÄ±?", options: ["Kaeshi-waza", "Jiyu-waza", "Henka-waza", "Kata"], correct: 0 },
                { q: "AkÄ±ÅŸta baÅŸka bir tekniÄŸe geÃ§iÅŸ yapmaya ne denir?", options: ["Henka-waza", "Kaeshi-waza", "Jiyu-waza", "Suburi"], correct: 0 },
                { q: "Ã–zgÃ¼r stilde sÄ±nÄ±rsÄ±z teknik uygulamasÄ±?", options: ["Jiyu-waza", "Kata", "Suburi", "Randori"], correct: 0 },
                { q: "SavaÅŸÃ§Ä±nÄ±n onur yasasÄ± olarak bilinen terim?", options: ["Budo", "Bushido", "Jujutsu", "Kenjutsu"], correct: 1 },
                { q: "Usta eÄŸitmen/baÅŸÃ¶ÄŸretmen seviyesindeki kiÅŸi?", options: ["Shihan", "Sensei", "Sempai", "Kohai"], correct: 0 },
                { q: "Kemer dÃ¼ÄŸÃ¼mÃ¼ne ve uyumlanmaya ne ad verilir?", options: ["Musubi", "Obi", "Himo", "Knot"], correct: 0 }
            ]},
            { name: "Siyah KuÅŸak", class: "belt-black", pool: [
                { q: "Siyah kuÅŸak derecelerine genel olarak ne denir?", options: ["Kyu", "Dan", "Belt", "Level"], correct: 1 },
                { q: "BaÅŸlangÄ±Ã§ derecesi olan 1. Dan'Ä±n adÄ± nedir?", options: ["Shodan", "Nidan", "Sandan", "Yondan"], correct: 0 },
                { q: "Teknik sonrasÄ± sÃ¼regelen farkÄ±ndalÄ±k hali?", options: ["Mokuso", "Zanshin", "Satori", "Kamae"], correct: 1 },
                { q: "Aikido'un Tokyo'daki manevi ve idari merkezi?", options: ["Kyoto", "Osaka", "Hombu Dojo", "Iwama"], correct: 2 },
                { q: "GerÃ§ek zaferin kendine olan zafer olduÄŸunu belirten ilke?", options: ["Masakatsu Agatsu", "Katsuhayabi", "Takemusu Aiki", "Misogi"], correct: 0 },
                { q: "Siyah kuÅŸak sahiplerine ne ad verilir?", options: ["Yudansha", "Mudansha", "Shihan", "Kohai"], correct: 0 },
                { q: "HenÃ¼z siyah kuÅŸaÄŸÄ± olmayanlara ne denir?", options: ["Yudansha", "Mudansha", "Sempai", "Sensei"], correct: 1 },
                { q: "YaratÄ±cÄ± ve sÄ±nÄ±rsÄ±z savunma felsefesi kavramÄ±?", options: ["Takemusu Aiki", "Bushido", "Budo", "Kenjutsu"], correct: 0 },
                { q: "Ruhsal aydÄ±nlanma veya bÃ¼yÃ¼k idrak anÄ±?", options: ["Satori", "Misogi", "Zanshin", "Mokuso"], correct: 0 },
                { q: "IÅŸÄ±k hÄ±zÄ±nda zafer/etki anlamÄ±na gelen kavram?", options: ["Katsuhayabi", "Zanshin", "Atemi", "Kuzushi"], correct: 0 }
            ]}
        ];

        function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

        function hideSenseiMessage() {
            const box = document.getElementById('message-box');
            if(box) box.classList.remove('active');
        }

        function showSenseiMessage(text, isHint = false) {
            const box = document.getElementById('message-box');
            if(!box) return;
            const label = document.getElementById('message-label');
            const txt = document.getElementById('message-text');
            if(label) label.innerText = isHint ? "â›©ï¸ Sensei Ã–ÄŸÃ¼dÃ¼" : "â›©ï¸ Sensei FÄ±sÄ±ldÄ±yor";
            if(txt) txt.innerText = text;
            box.classList.add('active');
            setTimeout(() => box.classList.remove('active'), 6500);
        }

        class AikidoGame {
            constructor() { 
                this.hiddenIndices = []; // 50:50 ile gizlenen ÅŸÄ±klarÄ±n indekslerini tutar
                this.initApp();
            }

            initApp() {
                this.setRandomIntroQuote();
            }

            setRandomIntroQuote() {
                const quoteEl = document.getElementById('intro-quote');
                const authorEl = document.getElementById('intro-quote-author');
                if(!quoteEl || !authorEl) return;
                const q = AIKIDO_QUOTES[Math.floor(Math.random() * AIKIDO_QUOTES.length)];
                quoteEl.innerText = `"${q.text}"`;
                authorEl.innerText = q.author;
            }

            start() {
                const intro = document.getElementById('intro-screen');
                const app = document.getElementById('game-app');
                if(intro) intro.classList.add('hidden');
                if(app) app.classList.remove('hidden');
                this.initGame();
            }

            initGame() {
                this.gameData = QUESTION_POOL.map(belt => {
                    const selected = shuffle([...belt.pool]).slice(0, 10);
                    return { ...belt, questions: selected };
                });
                
                this.beltIdx = 0; 
                this.qIdx = 0; 
                this.streak = 0;
                this.hiddenIndices = [];
                // Sensei jokerini takip listesinden Ã§Ä±kardÄ±m (sÄ±nÄ±rsÄ±z kullanÄ±m iÃ§in)
                this.jokers = { f50: true }; 
                this.totalQ = this.gameData.reduce((acc, belt) => acc + belt.questions.length, 0);
                this.currentGlobal = 0;
                this.renderTracker(); 
                this.updateUI();
            }

            renderTracker() {
                const tr = document.getElementById('belt-tracker'); 
                if(!tr) return;
                tr.innerHTML = '';
                this.gameData.forEach((b, i) => {
                    const d = document.createElement('div');
                    d.className = `belt-node h-8 px-4 rounded-full flex items-center justify-center text-[9px] font-bold shadow-sm ${b.class} ${i > this.beltIdx ? 'opacity-20 scale-90' : 'opacity-100 scale-100'}`;
                    d.innerText = b.name; 
                    tr.appendChild(d);
                });
            }

            updateUI() {
                const b = this.gameData[this.beltIdx]; 
                const q = b.questions[this.qIdx];
                
                const qText = document.getElementById('question-text');
                const tag = document.getElementById('belt-tag');
                const streakVal = document.getElementById('streak-val');
                const progBar = document.getElementById('progress-bar');
                const grid = document.getElementById('options-grid');
                const f50Btn = document.getElementById('joker-50');
                const f50Text = document.getElementById('joker-unlock-text');

                if(qText) qText.innerText = q.q;
                if(tag) {
                    tag.innerText = `${b.name} - SÄ±nav ${this.qIdx + 1}/10`;
                    tag.className = `inline-block px-3 py-1 rounded text-[9px] font-black uppercase mb-3 ${b.class}`;
                }
                if(streakVal) streakVal.innerText = this.streak;
                
                if(grid) {
                    grid.innerHTML = '';
                    const opts = q.options.map((o, i) => ({ text: o, id: i }));
                    const shuffledOpts = shuffle([...opts]);
                    
                    shuffledOpts.forEach((o) => {
                        if (this.hiddenIndices.includes(o.id)) return;

                        const btn = document.createElement('button');
                        btn.className = 'option-btn p-5 rounded-2xl text-left flex items-start gap-4 text-sm';
                        btn.innerHTML = `<span class="text-amber-500 font-bold opacity-70">â€¢</span> <span>${o.text}</span>`;
                        btn.onclick = () => this.handleAnswer(o.id, btn);
                        grid.appendChild(btn);
                    });
                }
                
                if(progBar) progBar.style.width = `${(this.currentGlobal / this.totalQ) * 100}%`;
                
                if(f50Btn) {
                    if (this.streak >= 3 && this.jokers.f50) {
                        f50Btn.classList.remove('opacity-30', 'cursor-not-allowed');
                        f50Btn.classList.add('joker-active');
                        if(f50Text) f50Text.innerText = "MÃ¼sait";
                    } else {
                        f50Btn.classList.add('opacity-30', 'cursor-not-allowed');
                        f50Btn.classList.remove('joker-active');
                        if(f50Text) f50Text.innerText = this.jokers.f50 ? "3 seri lazÄ±m" : "KullanÄ±ldÄ±";
                    }
                }
                
                // Sensei butonu her zaman aktif
                const senseiBtn = document.getElementById('joker-sensei');
                if(senseiBtn) {
                    senseiBtn.classList.remove('opacity-30', 'cursor-not-allowed');
                }
            }

            showPhilosophyHint() { 
                const hint = AIKIDO_PHILOSOPHY[Math.floor(Math.random() * AIKIDO_PHILOSOPHY.length)];
                showSenseiMessage(hint, true); 
            }

            handleAnswer(selectedId, btn) {
                const b = this.gameData[this.beltIdx];
                const q = b.questions[this.qIdx];
                const corr = q.correct;
                
                if (selectedId === corr) {
                    btn.classList.add('correct'); 
                    this.streak++; 
                    this.currentGlobal++;
                    this.hiddenIndices = [];
                    setTimeout(() => this.next(), 600);
                } else {
                    btn.classList.add('wrong');
                    const correctText = q.options[corr];
                    const selectedText = q.options[selectedId];
                    setTimeout(() => this.end(false, selectedText, correctText), 1000);
                }
            }

            next() {
                this.qIdx++; 
                if (this.qIdx >= 10) { 
                    this.qIdx = 0; 
                    this.beltIdx++; 
                    this.renderTracker(); 
                }
                if (this.beltIdx >= this.gameData.length) this.end(true);
                else this.updateUI();
            }

            useSensei() { 
                // SÄ±nÄ±rsÄ±z kullanÄ±m: joker durumunu kontrol etmiyoruz ve false yapmÄ±yoruz
                const hint = AIKIDO_PHILOSOPHY[Math.floor(Math.random() * AIKIDO_PHILOSOPHY.length)];
                showSenseiMessage(hint); 
            }

            use5050() {
                if (this.streak < 3 || !this.jokers.f50) return;
                const b = this.gameData[this.beltIdx];
                const q = b.questions[this.qIdx];
                const corr = q.correct;
                
                let wrongIndices = [0, 1, 2, 3].filter(i => i !== corr);
                shuffle(wrongIndices);
                this.hiddenIndices = wrongIndices.slice(0, 2);
                
                this.jokers.f50 = false; 
                this.updateUI();
            }

            end(win, selectedText = "", correctText = "") {
                const ov = document.getElementById('overlay');
                const titleEl = document.getElementById('modal-title');
                const iconEl = document.getElementById('modal-icon');
                const quoteEl = document.getElementById('modal-quote-res');
                const authorEl = document.getElementById('modal-quote-author-res');
                const descEl = document.getElementById('modal-desc');
                const detailsBox = document.getElementById('wrong-answer-details');
                const userAns = document.getElementById('user-ans-text');
                const correctAns = document.getElementById('correct-ans-text');

                const q = AIKIDO_QUOTES[Math.floor(Math.random() * AIKIDO_QUOTES.length)];
                if(quoteEl) quoteEl.innerText = `"${q.text}"`;
                if(authorEl) authorEl.innerText = q.author;
                
                if(ov) ov.classList.remove('hidden');
                
                if (win) {
                    if(iconEl) iconEl.innerText = "ğŸ¥‹";
                    if(titleEl) titleEl.innerText = "SHODAN OLDUN!";
                    if(descEl) descEl.innerText = "Tebrikler! 70 soruluk dev Aikido sÄ±navÄ±nÄ± baÅŸarÄ±yla tamamladÄ±nÄ±z. ArtÄ±k bir Siyah KuÅŸak sahibisiniz.";
                    if(detailsBox) detailsBox.classList.add('hidden');
                } else {
                    if(iconEl) iconEl.innerText = "ğŸ‹";
                    if(titleEl) titleEl.innerText = "ANTRENMANA DEVAM";
                    if(descEl) descEl.innerText = "YanlÄ±ÅŸ bir hamle yaptÄ±nÄ±z. Aikido'da baÅŸarÄ±sÄ±zlÄ±k yoktur, sadece tekrar vardÄ±r.";
                    if(detailsBox) {
                        detailsBox.classList.remove('hidden');
                        if(userAns) userAns.innerText = selectedText;
                        if(correctAns) correctAns.innerText = correctText;
                    }
                }
            }

            resetToStart() { 
                this.setRandomIntroQuote();
                const ov = document.getElementById('overlay');
                const app = document.getElementById('game-app');
                const intro = document.getElementById('intro-screen');
                if(ov) ov.classList.add('hidden'); 
                if(app) app.classList.add('hidden'); 
                if(intro) intro.classList.remove('hidden'); 
                this.streak = 0;
                this.hiddenIndices = [];
            }
        }

        const game = new AikidoGame();
        window.onload = () => game.setRandomIntroQuote();
    </script>
</body>
</html>
