<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kim Siyah KuÅŸak Olmak Ä°ster? Aikido felsefesi Ã¼zerine kurulu interaktif bilgi yarÄ±ÅŸmasÄ±.">
    <title>Kim Siyah KuÅŸak Olmak Ä°ster: AÄ°KÄ°DO</title>
    
    <!-- Tailwind CSS ve Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            overflow-x: hidden;
        }
        .dojo-overlay {
            background: linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.95)), 
                        url('https://images.unsplash.com/photo-1555597673-b21d5c935865?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            position: fixed;
            inset: 0;
            z-index: -1;
        }
        .title-font { font-family: 'Permanent Marker', cursive; }
        .belt-node { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .option-btn {
            background: rgba(30, 41, 59, 0.9);
            border: 2px solid #475569;
            color: #f8fafc;
            transition: all 0.2s;
            width: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
            min-height: 60px;
        }
        .option-btn:hover:not(:disabled) {
            background: rgba(51, 65, 85, 1);
            border-color: #fbbf24;
            transform: translateY(-2px);
        }
        .correct { background-color: #059669 !important; border-color: #10b981 !important; animation: success-pulse 0.5s; }
        .wrong { background-color: #dc2626 !important; border-color: #ef4444 !important; }
        
        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .belt-white { background: #ffffff; color: #000; }
        .belt-yellow { background: #fbbf24; color: #000; }
        .belt-orange { background: #f97316; color: #fff; }
        .belt-green { background: #22c55e; color: #fff; }
        .belt-blue { background: #3b82f6; color: #fff; }
        .belt-brown { background: #78350f; color: #fff; }
        .belt-black { background: #000000; color: #fff; border: 1px solid #fff; }
        
        .joker-locked { opacity: 0.4; cursor: not-allowed; filter: grayscale(1); }
        .joker-active { animation: glow 2s infinite; }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #a855f7; }
            50% { box-shadow: 0 0 20px #a855f7; }
        }
        
        #message-box {
            transform: translate(-50%, -120%);
            transition: transform 0.3s ease-out;
            left: 50%;
        }
        #message-box.active {
            transform: translate(-50%, 0);
        }

        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="dojo-overlay"></div>

    <!-- Sensei Mesaj Kutusu -->
    <div id="message-box" class="fixed top-10 z-[60] w-full max-w-md bg-indigo-900 border-2 border-indigo-400 p-4 rounded-2xl shadow-2xl flex items-center gap-4">
        <div class="text-3xl">â›©ï¸</div>
        <div>
            <p id="message-label" class="text-xs font-bold text-indigo-300 uppercase tracking-tighter">Sensei FÄ±sÄ±ldÄ±yor</p>
            <p id="message-text" class="text-sm font-medium italic"></p>
        </div>
        <button onclick="hideSenseiMessage()" class="ml-auto text-indigo-300 hover:text-white">âœ•</button>
    </div>

    <!-- GiriÅŸ EkranÄ± -->
    <div id="intro-screen" class="max-w-3xl w-full bg-slate-900/80 backdrop-blur-xl border border-slate-700 rounded-3xl p-8 shadow-2xl flex flex-col gap-6 fade-in text-center">
        <div>
            <h1 class="title-font text-4xl text-amber-500 mb-2 uppercase">Kim Siyah KuÅŸak Olmak Ä°ster?</h1>
            <p class="text-slate-400 tracking-widest font-bold uppercase">Zihin, Beden ve Ruh Uyumunun Yolu</p>
            <p class="text-amber-600/80 text-xs mt-2 uppercase font-bold tracking-tighter">Kurucu: Morihei Ueshiba (O-Sensei)</p>
        </div>

        <!-- Rastgele Felsefi SÃ¶z -->
        <div class="p-6 bg-slate-800/60 rounded-2xl border border-amber-500/30 italic">
            <p id="intro-quote" class="text-slate-200 text-lg leading-relaxed"></p>
            <p id="intro-quote-author" class="text-amber-500 text-xs mt-3 font-bold uppercase tracking-widest"></p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm leading-relaxed text-left">
            <div class="bg-slate-800/40 p-4 rounded-xl border border-slate-700">
                <h3 class="text-amber-400 font-bold mb-1">ğŸ“œ GeniÅŸletilmiÅŸ SÄ±nav</h3>
                <p class="text-xs text-slate-400">Her kuÅŸak iÃ§in rastgele seÃ§ilen 5 soru (toplam 35 soru) sizi bekliyor. SÄ±ralama her seferinde deÄŸiÅŸir.</p>
            </div>
            <div class="bg-slate-800/40 p-4 rounded-xl border border-slate-700">
                <h3 class="text-amber-400 font-bold mb-1">ğŸ¥‹ UstalÄ±k Yolu</h3>
                <p class="text-xs text-slate-400">Beyazdan siyaha giden bu yolda sadece teknik deÄŸil, felsefe de Ã¶nemlidir. Mutlu YÄ±llar ve baÅŸarÄ±lar dileriz!</p>
            </div>
        </div>

        <button onclick="game.start()" class="bg-amber-500 text-slate-900 font-black py-4 rounded-2xl hover:bg-amber-400 transition transform hover:scale-105 shadow-xl">YOLCULUÄA BAÅLA</button>
    </div>

    <!-- Ana Oyun EkranÄ± -->
    <div id="game-app" class="hidden max-w-4xl w-full bg-slate-900/40 backdrop-blur-xl border border-slate-700 rounded-3xl p-6 md:p-10 shadow-2xl relative">
        <header class="text-center mb-8">
            <h1 class="title-font text-3xl md:text-5xl text-amber-500">AÄ°KÄ°DO YOLCULUÄU</h1>
        </header>

        <div class="mb-10">
            <div class="flex flex-wrap justify-center gap-3 md:gap-4" id="belt-tracker"></div>
            <div class="mt-4 h-2 bg-slate-800 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-amber-500 transition-all duration-700" style="width: 0%"></div>
            </div>
        </div>

        <main class="space-y-6">
            <div class="bg-slate-800/80 p-6 rounded-2xl border-l-8 border-amber-500 relative">
                <div id="belt-tag" class="inline-block px-3 py-1 rounded text-xs font-black uppercase mb-3"></div>
                <button onclick="game.showCurrentHint()" class="absolute top-4 right-4 text-amber-400 hover:text-amber-300" title="Ä°pucu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>
                </button>
                <h2 id="question-text" class="text-xl md:text-2xl font-medium leading-relaxed"></h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="options-grid"></div>
        </main>

        <footer class="mt-10 flex flex-wrap justify-center gap-4 border-t border-slate-800 pt-8">
            <button id="joker-sensei" onclick="game.useSensei()" class="bg-indigo-600 px-6 py-3 rounded-xl text-sm font-bold shadow-lg">â›©ï¸ Sensei'ye Sor</button>
            <button id="joker-50" onclick="game.use5050()" class="joker-locked bg-purple-600 px-6 py-3 rounded-xl text-sm font-bold transition flex flex-col items-center">
                <span>â˜¯ï¸ 50:50</span>
                <span id="joker-unlock-text" class="text-[10px] font-normal italic">3 seri gerekir</span>
            </button>
            <button id="joker-skip" onclick="game.useSkip()" class="bg-teal-600 px-6 py-3 rounded-xl text-sm font-bold shadow-lg">ğŸŒ€ Pas GeÃ§</button>
        </footer>

        <div class="absolute top-4 right-6 text-slate-500 font-mono text-sm">DoÄŸru Seri: <span id="streak-val" class="text-amber-500">0</span></div>
    </div>

    <!-- SonuÃ§ EkranÄ± -->
    <div id="overlay" class="hidden fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex items-center justify-center p-6 text-center">
        <div class="bg-slate-900 border-2 border-amber-500 p-10 rounded-3xl max-w-xl w-full flex flex-col items-center">
            <div id="modal-icon" class="text-7xl mb-6">ğŸ†</div>
            <h2 id="modal-title" class="title-font text-3xl md:text-4xl text-amber-500 mb-4 uppercase"></h2>
            <div id="quote-box" class="mb-8 p-6 bg-slate-800/40 border-l-4 border-indigo-500 italic text-slate-300">
                <p id="modal-quote-res"></p>
                <p id="modal-quote-author-res" class="text-xs mt-2 text-indigo-400 font-bold"></p>
            </div>
            <p id="modal-desc" class="text-slate-400 mb-8"></p>
            <button onclick="game.resetToStart()" class="bg-amber-500 text-slate-900 font-black px-12 py-4 rounded-full hover:scale-105 transition">YOLU TEKRAR YÃœRÃœ</button>
        </div>
    </div>

    <script>
        const AIKIDO_QUOTES = [
            { text: "GerÃ§ek zafer, kendine karÅŸÄ± kazanÄ±lan zaferdir.", author: "Morihei Ueshiba" },
            { text: "DÃ¼ÅŸmek sorun deÄŸil, her seferinde daha gÃ¼Ã§lÃ¼ ayaÄŸa kalkmak Ã¶nemlidir.", author: "Aikido Yolu" },
            { text: "Zihnini su gibi yap; formsuz ve her ÅŸeye uyumlu.", author: "Budo Felsefesi" },
            { text: "Hatalar, mÃ¼kemmelliÄŸe giden yolun taÅŸlarÄ±dÄ±r.", author: "Dojo BilgeliÄŸi" },
            { text: "Yolun kendisi hedeftir. Her adÄ±m bir Ã¶ÄŸretidir.", author: "Zen Ã–ÄŸretisi" },
            { text: "BaÅŸkalarÄ±nÄ± yenmek gÃ¼Ã§tÃ¼r, kendini yenmek ise gerÃ§ek kudrettir.", author: "O-Sensei" },
            { text: "Aikido, dÃ¼nyayÄ± bir aile yapmak ve barÄ±ÅŸÄ± korumak iÃ§in bir yoldur.", author: "Morihei Ueshiba" },
            { text: "Aikido bir dÃ¶vÃ¼ÅŸ deÄŸil, evrensel sevgiyi yayma sanatÄ±dÄ±r.", author: "O-Sensei" }
        ];

        const QUESTION_POOL = [
            { name: "Beyaz KuÅŸak", class: "belt-white", pool: [
                { q: "Aikido'nun kurucusu Morihei Ueshiba'ya ne denir?", options: ["Soke", "O-Sensei", "Doshu", "Shihan"], correct: 1, hint: "BÃ¼yÃ¼k Ã–ÄŸretmen anlamÄ±na gelir." },
                { q: "Aikido'da 'Ki' neyi temsil eder?", options: ["Sevgi", "Yol", "Enerji / Ruh", "Uyum"], correct: 2, hint: "YaÅŸam enerjisidir." },
                { q: "Antrenman baÅŸlarken sÃ¶ylenen rica sÃ¶zÃ¼?", options: ["Arigato", "Onegai Shimasu", "Hajime", "Rei"], correct: 1, hint: "LÃ¼tfen Ã§alÄ±ÅŸalÄ±m demektir." },
                { q: "Aikido minderi ne ad verilir?", options: ["Tatami", "Dojo", "Zazen", "Futon"], correct: 0, hint: "Japon evlerinde kullanÄ±lan minder tÃ¼rÃ¼dÃ¼r." },
                { q: "Aikido kÄ±yafetine ne ad verilir?", options: ["Kimono", "Keikogi", "Hakama", "Yukata"], correct: 1, hint: "Ã‡alÄ±ÅŸma giysisi." },
                { q: "Dojo'da selamlamaya ne denir?", options: ["Hajime", "Rei", "Yame", "Kiai"], correct: 1, hint: "EÄŸilerek yapÄ±lan selamlama." },
                { q: "Aikido'nun temel felsefesini temsil eden sembollerden hangisi 'Uyum'dur?", options: ["Ai", "Ki", "Do", "Budo"], correct: 0, hint: "Kelimenin ilk harfidir." },
                { q: "Dojo'da Ã¶n tarafa (kurucunun resminin olduÄŸu yer) ne denir?", options: ["Kamiza", "Shimoza", "Joseki", "Shimoseki"], correct: 0, hint: "Ãœst taraf." },
                { q: "Ayakta selam vermeye ne denir?", options: ["Zarei", "Ritsurei", "Mokuso", "Seiza"], correct: 1, hint: "Ayakta eÄŸilmek." },
                { q: "Antrenman bitiÅŸinde sÃ¶ylenen teÅŸekkÃ¼r sÃ¶zÃ¼?", options: ["Sayonara", "Domo Arigato Gozaimashita", "Hajime", "Osu"], correct: 1, hint: "Ã‡ok teÅŸekkÃ¼r ederim demektir." }
            ]},
            { name: "SarÄ± KuÅŸak", class: "belt-yellow", pool: [
                { q: "Ayaktaki temel duruÅŸa ne denir?", options: ["Seiza", "Kamae", "Ukemi", "Tenkan"], correct: 1, hint: "HazÄ±r duruÅŸtur." },
                { q: "Ã–ne doÄŸru yuvarlanarak dÃ¼ÅŸÃ¼ÅŸ?", options: ["Mae Ukemi", "Ushiro Ukemi", "Yoko Ukemi", "Tobu Ukemi"], correct: 0, hint: "Mae Ã¶n demektir." },
                { q: "Diz Ã¼stÃ¼ yÃ¼rÃ¼yÃ¼ÅŸ tekniÄŸi?", options: ["Shikko", "Tenkan", "Irimi", "Tsugi-ashi"], correct: 0, hint: "Samuray yÃ¼rÃ¼yÃ¼ÅŸÃ¼dÃ¼r." },
                { q: "SaÄŸ ayak Ã¶nde duruÅŸa ne denir?", options: ["Migi Hanmi", "Hidari Hanmi", "Seiza", "Kamae"], correct: 0, hint: "Migi saÄŸ demektir." },
                { q: "TekniÄŸi uygulayan kiÅŸi (savunmacÄ±)?", options: ["Uke", "Nage", "Sensei", "Kohai"], correct: 1, hint: "FÄ±rlatan." },
                { q: "Geriye doÄŸru yuvarlanarak dÃ¼ÅŸÃ¼ÅŸ?", options: ["Mae Ukemi", "Ushiro Ukemi", "Yoko Ukemi", "Tobu Ukemi"], correct: 1, hint: "Ushiro arka demektir." },
                { q: "Aikido minderi Ã¼zerinde diz Ã¼stÃ¼nde oturma?", options: ["Seiza", "Agura", "Kamae", "Zazen"], correct: 0, hint: "Geleneksel Japon oturuÅŸu." },
                { q: "Harekete baÅŸlama komutu?", options: ["Yame", "Hajime", "Rei", "Mokuso"], correct: 1, hint: "BaÅŸlayÄ±n." },
                { q: "Merkezlenme noktasÄ±na ne denir?", options: ["Hara", "Seika Tanden", "Kokyu", "Kiai"], correct: 1, hint: "KarÄ±n altÄ± bÃ¶lge." },
                { q: "TekniÄŸi alan kiÅŸi (saldÄ±rgan)?", options: ["Nage", "Uke", "Sensei", "Shihan"], correct: 1, hint: "DÃ¼ÅŸÃ¼ÅŸ yapan." }
            ]},
            { name: "Turuncu KuÅŸak", class: "belt-orange", pool: [
                { q: "SaldÄ±rganÄ±n gÃ¼cÃ¼nÃ¼ arkaya yÃ¶nlendiren dairesel adÄ±m?", options: ["Irimi", "Tenkan", "Tsugi-ashi", "Ayumi-ashi"], correct: 1, hint: "DÃ¶nÃ¼ÅŸ iÃ§erir." },
                { q: "Birinci kontrol Ã¶ÄŸretisi?", options: ["Nikyo", "Sankyo", "Ikkyo", "Yonkyo"], correct: 2, hint: "Temel kol kilididir." },
                { q: "128 cm uzunluÄŸundaki ahÅŸap sopa?", options: ["Bokken", "Tanto", "Jo", "Katana"], correct: 2, hint: "Asa formundadÄ±r." },
                { q: "Ä°kinci kontrol Ã¶ÄŸretisi (bilek kilidi)?", options: ["Ikkyo", "Nikyo", "Sankyo", "Yonkyo"], correct: 1, hint: "BileÄŸi iÃ§eri doÄŸru bÃ¼ker." },
                { q: "DoÄŸrudan rakibin iÃ§ine giriÅŸ adÄ±mÄ±?", options: ["Irimi", "Tenkan", "Shikko", "Ura"], correct: 0, hint: "Ä°Ã§eri girmek." },
                { q: "Aikido'da vuruÅŸ (ÅŸaÅŸÄ±rtma) hamlesi?", options: ["Atemi", "Kiai", "Ukemi", "Suburi"], correct: 0, hint: "Bedene yapÄ±lan darbe." },
                { q: "KÄ±lÄ±Ã§ formundaki ahÅŸap silah?", options: ["Bokken", "Jo", "Tanto", "Shinai"], correct: 0, hint: "Kenjutsu iÃ§in." },
                { q: "BileÄŸi spiral ÅŸekilde bÃ¼kme (Ã¼Ã§Ã¼ncÃ¼ Ã¶ÄŸreti)?", options: ["Ikkyo", "Nikyo", "Sankyo", "Yonkyo"], correct: 2, hint: "San 3 demektir." },
                { q: "KarÅŸÄ±lÄ±klÄ± aynÄ± ayaklarÄ±n Ã¶nde olduÄŸu duruÅŸ?", options: ["Ai-hanmi", "Gyaku-hanmi", "Migi-hanmi", "Hidari-hanmi"], correct: 0, hint: "Uyumlu duruÅŸ." },
                { q: "Teknik bitiÅŸinde rakibi yerde sabitleme?", options: ["Osae", "Nage", "Ukemi", "Rei"], correct: 0, hint: "Kilitleme." }
            ]},
            { name: "YeÅŸil KuÅŸak", class: "belt-green", pool: [
                { q: "'Kotegaeshi' vÃ¼cudun neresine uygulanÄ±r?", options: ["Omuz", "Bilek", "Dirsek", "Boyun"], correct: 1, hint: "Bilek bÃ¼kÃ¼lmesidir." },
                { q: "DoÄŸrudan iÃ§eri girerek fÄ±rlatma?", options: ["Iriminage", "Shihonage", "Tenchi-nage", "Koshinage"], correct: 0, hint: "Irimi iÃ§eri girmek demektir." },
                { q: "Yerde kontrol tekniklerinin genel adÄ±?", options: ["Katame-waza", "Nage-waza", "Atemi-waza", "Uke-waza"], correct: 0, hint: "Sabitleme teknikleri." },
                { q: "BÄ±Ã§ak saldÄ±rÄ±larÄ±na karÅŸÄ± Ã§alÄ±ÅŸma?", options: ["Tanto-dori", "Jo-dori", "Bokken-dori", "Kumi-tachi"], correct: 0, hint: "Tanto bÄ±Ã§aktÄ±r." },
                { q: "DÃ¶rdÃ¼ncÃ¼ kontrol Ã¶ÄŸretisi (sinir noktasÄ±na baskÄ±)?", options: ["Nikyo", "Yonkyo", "Sankyo", "Gokyo"], correct: 1, hint: "Yon 4 demektir." },
                { q: "Nefes gÃ¼cÃ¼ fÄ±rlatÄ±ÅŸÄ±?", options: ["Kokyunage", "Shihonage", "Tenchinage", "Koshinage"], correct: 0, hint: "Kokyu nefestir." },
                { q: "Rakibin dengesini bozma durumuna ne denir?", options: ["Kuzushi", "Zanshin", "Kiai", "Ma-ai"], correct: 0, hint: "Denge kaybÄ±." },
                { q: "Sessiz meditasyon (Antrenman baÅŸÄ± ve sonu)?", options: ["Mokuso", "Zanshin", "Misogi", "Hara"], correct: 0, hint: "GÃ¶zler kapalÄ± dÃ¼ÅŸÃ¼nce." },
                { q: "Dikey kesiÅŸ hareketi (KÄ±lÄ±Ã§ disiplininden)?", options: ["Shomenuchi", "Yokomenuchi", "Tsuki", "Atemi"], correct: 0, hint: "Alna vuruÅŸ." },
                { q: "Yan taraftan kesiÅŸ hareketi?", options: ["Shomenuchi", "Yokomenuchi", "Tsuki", "Atemi"], correct: 1, hint: "Yoko yan demektir." }
            ]},
            { name: "Mavi KuÅŸak", class: "belt-blue", pool: [
                { q: "Shihonage'deki 'Shiho' ne demektir?", options: ["DÃ¶rt yÃ¶n", "BÃ¼yÃ¼k atÄ±ÅŸ", "KÄ±lÄ±Ã§", "Nefes"], correct: 0, hint: "DÃ¶rt tarafÄ± temsil eder." },
                { q: "Diz Ã¼stÃ¼nde yapÄ±lan tekniklere ne denir?", options: ["Tachi-waza", "Suwari-waza", "Hanmi-handachi", "Randori"], correct: 1, hint: "Oturarak Ã§alÄ±ÅŸmadÄ±r." },
                { q: "DÃ¶nerek yapÄ±lan fÄ±rlatma (DÃ¶nel fÄ±rlatÄ±ÅŸ)?", options: ["Kaitennage", "Iriminage", "Shihonage", "Tenchinage"], correct: 0, hint: "Kaiten dÃ¶nmektir." },
                { q: "GÃ¶k-Yer fÄ±rlatÄ±ÅŸÄ±?", options: ["Tenchinage", "Kokyunage", "Koshinage", "Iriminage"], correct: 0, hint: "Ten gÃ¶k, Chi yer." },
                { q: "Bire karÅŸÄ± Ã§oklu saldÄ±rgan Ã§alÄ±ÅŸmasÄ±?", options: ["Randori", "Kata", "Suburi", "Embu"], correct: 0, hint: "Serbest Ã§alÄ±ÅŸma." },
                { q: "KÄ±lÄ±Ã§ (Bokken) ile yapÄ±lan teknikler?", options: ["Ken-waza", "Jo-waza", "Tanto-waza", "Tai-jutsu"], correct: 0, hint: "Ken kÄ±lÄ±Ã§ demektir." },
                { q: "BeÅŸinci kontrol Ã¶ÄŸretisi (BÄ±Ã§ak kontrolÃ¼)?", options: ["Ikkyo", "Nikyo", "Sankyo", "Gokyo"], correct: 3, hint: "Go 5 demektir." },
                { q: "KalÃ§adan fÄ±rlatma tekniÄŸi?", options: ["Koshinage", "Iriminage", "Shihonage", "Tenchinage"], correct: 0, hint: "Koshi kalÃ§a." },
                { q: "SaldÄ±rganÄ±n ayakta, savunmacÄ±nÄ±n oturur olduÄŸu teknikler?", options: ["Hanmi-handachi", "Suwari-waza", "Tachi-waza", "Randori"], correct: 0, hint: "YarÄ± oturur." },
                { q: "TekniÄŸin arkadan (dÃ¶nerek) uygulanma biÃ§imi?", options: ["Omote", "Ura", "Irimi", "Tenkan"], correct: 1, hint: "Arka taraf." }
            ]},
            { name: "Kahverengi KuÅŸak", class: "belt-brown", pool: [
                { q: "Siyah kuÅŸaklarÄ±n giydiÄŸi pileli pantolon?", options: ["Gi", "Keikogi", "Hakama", "Obi"], correct: 2, hint: "7 pileli kÄ±yafettir." },
                { q: "Aikido Ã§alÄ±ÅŸÄ±rken giyilen Ã¼st ve alt takÄ±mÄ±n adÄ±?", options: ["Keikogi", "Hakama", "Yukata", "Kimono"], correct: 0, hint: "Gi olarak da bilinir." },
                { q: "Manevi ve bedensel arÄ±nma ritÃ¼eli?", options: ["Misogi", "Mokuso", "Zanshin", "Satori"], correct: 0, hint: "Su ile temizlenme/arÄ±nma." },
                { q: "TekniÄŸin Ã¶nden (doÄŸrudan) uygulanma biÃ§imi?", options: ["Omote", "Ura", "Irimi", "Tenkan"], correct: 0, hint: "Ã–n taraf." },
                { q: "Mesafe kavramÄ±na ne denir?", options: ["Ma-ai", "Ma", "Ai", "Do"], correct: 0, hint: "SaldÄ±rganla aradaki boÅŸluk." },
                { q: "Jo (asa) ile yapÄ±lan solo hareketler dizisi?", options: ["Kata", "Suburi", "Randori", "Waza"], correct: 0, hint: "SÄ±ralÄ± form." },
                { q: "Daha kÄ±demli Ã¶ÄŸrenciye ne denir?", options: ["Sempai", "Kohai", "Sensei", "Shihan"], correct: 0, hint: "Ãœst seviye." },
                { q: "Daha yeni Ã¶ÄŸrenciye ne denir?", options: ["Kohai", "Sempai", "Doshu", "Soke"], correct: 0, hint: "Alt seviye." },
                { q: "Aikido diplomasÄ±na ve seviyesine ne denir?", options: ["Dan/Kyu", "Belt", "Point", "Grade"], correct: 0, hint: "Derecelendirme." },
                { q: "Siyah kuÅŸak Ã¶ncesi son renkli kuÅŸak seviyesi?", options: ["1. Kyu", "1. Dan", "6. Kyu", "Siyah"], correct: 0, hint: "En kÄ±demli kyu." }
            ]},
            { name: "Siyah KuÅŸak", class: "belt-black", pool: [
                { q: "Aikido'nun manevi merkezi neresidir?", options: ["Tokyo", "Kyoto", "Iwama", "Osaka"], correct: 2, hint: "Dojo burada kurulmuÅŸtur." },
                { q: "Teknik sonrasÄ± tetikte kalma hali?", options: ["Mokuso", "Zanshin", "Satori", "Kamae"], correct: 1, hint: "FarkÄ±ndalÄ±k halidir." },
                { q: "O-Sensei'nin 'GerÃ§ek zafer kendine olan zaferdir' sÃ¶zÃ¼ hangisidir?", options: ["Masakatsu Agatsu", "Katsuhayabi", "Takemusu Aiki", "Aiki Jinja"], correct: 0, hint: "Masa-katsu..." },
                { q: "Siyah kuÅŸak sahiplerine verilen genel ad?", options: ["Yudansha", "Mudansha", "Kohai", "Shihan"], correct: 0, hint: "Dan sahibi." },
                { q: "HenÃ¼z siyah kuÅŸaÄŸÄ± olmayanlara ne denir?", options: ["Mudansha", "Yudansha", "Sensei", "Sempai"], correct: 0, hint: "DansÄ±z." },
                { q: "Kurucunun resminin arkasÄ±ndaki kutsal yer?", options: ["Kamiza", "Tokonoma", "Butsudan", "Dojo"], correct: 0, hint: "Kutsal kÃ¶ÅŸe." },
                { q: "Enerjiyi serbest bÄ±rakma ve baÄŸÄ±rma?", options: ["Kiai", "Atemi", "Kokyu", "Kuzushi"], correct: 0, hint: "Ruhun Ã§Ä±ÄŸlÄ±ÄŸÄ±." },
                { q: "Aikido'nun 'YaratÄ±cÄ± SavaÅŸ SanatÄ±' kavramÄ±?", options: ["Takemusu Aiki", "Misogi", "Satori", "Hajime"], correct: 0, hint: "Take-musu." },
                { q: "Uyum ve baÄŸlanma anlamÄ±na gelen terim?", options: ["Musubi", "Zanshin", "Kiai", "Atemi"], correct: 0, hint: "DÃ¼ÄŸÃ¼mlemek demektir." },
                { q: "1. Dan seviyesine ne ad verilir?", options: ["Shodan", "Nidan", "Sandan", "Yondan"], correct: 0, hint: "BaÅŸlangÄ±Ã§ derecesi." }
            ]}
        ];

        function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

        function hideSenseiMessage() {
            const box = document.getElementById('message-box');
            if(box) box.classList.remove('active');
        }

        function showSenseiMessage(text, isHint = false) {
            const box = document.getElementById('message-box');
            if(!box) return;
            const label = document.getElementById('message-label');
            const txt = document.getElementById('message-text');
            if(label) label.innerText = isHint ? "â›©ï¸ Sensei'nin Ä°pucu" : "â›©ï¸ Sensei FÄ±sÄ±ldÄ±yor";
            if(txt) txt.innerText = text;
            box.classList.add('active');
            setTimeout(() => box.classList.remove('active'), 6000);
        }

        class AikidoGame {
            constructor() { 
                this.initApp();
            }

            initApp() {
                this.setRandomIntroQuote();
            }

            setRandomIntroQuote() {
                const quoteEl = document.getElementById('intro-quote');
                const authorEl = document.getElementById('intro-quote-author');
                if(!quoteEl || !authorEl) return;
                const q = AIKIDO_QUOTES[Math.floor(Math.random() * AIKIDO_QUOTES.length)];
                quoteEl.innerText = `"${q.text}"`;
                authorEl.innerText = q.author;
            }

            start() {
                const intro = document.getElementById('intro-screen');
                const app = document.getElementById('game-app');
                if(intro) intro.classList.add('hidden');
                if(app) app.classList.remove('hidden');
                this.initGame();
            }

            initGame() {
                // Her kuÅŸaktan havuzdan rastgele 5 soru seÃ§
                this.gameData = QUESTION_POOL.map(belt => {
                    const poolCopy = [...belt.pool];
                    const selected = shuffle(poolCopy).slice(0, 5); // 5 soru seÃ§
                    return { ...belt, questions: selected };
                });
                
                this.beltIdx = 0; 
                this.qIdx = 0; 
                this.streak = 0;
                this.jokers = { sensei: true, f50: true, skip: true };
                this.totalQ = this.gameData.reduce((acc, belt) => acc + belt.questions.length, 0);
                this.currentGlobal = 0;
                this.renderTracker(); 
                this.updateUI();
            }

            renderTracker() {
                const tr = document.getElementById('belt-tracker'); 
                if(!tr) return;
                tr.innerHTML = '';
                this.gameData.forEach((b, i) => {
                    const d = document.createElement('div');
                    d.className = `belt-node h-8 px-4 rounded-full flex items-center justify-center text-[10px] font-bold shadow-sm ${b.class} ${i > this.beltIdx ? 'opacity-20 scale-90' : 'opacity-100 scale-100'}`;
                    d.innerText = b.name; 
                    tr.appendChild(d);
                });
            }

            updateUI() {
                const b = this.gameData[this.beltIdx]; 
                const q = b.questions[this.qIdx];
                
                const qText = document.getElementById('question-text');
                const tag = document.getElementById('belt-tag');
                const streakVal = document.getElementById('streak-val');
                const progBar = document.getElementById('progress-bar');
                const grid = document.getElementById('options-grid');
                const f50Btn = document.getElementById('joker-50');
                const f50Text = document.getElementById('joker-unlock-text');

                if(qText) qText.innerText = q.q;
                if(tag) {
                    tag.innerText = `${b.name} - Soru ${this.qIdx + 1}/5`;
                    tag.className = `inline-block px-3 py-1 rounded text-xs font-black uppercase mb-3 ${b.class}`;
                }
                if(streakVal) streakVal.innerText = this.streak;
                
                if(grid) {
                    grid.innerHTML = '';
                    // ÅÄ±klarÄ± da karÄ±ÅŸtÄ±rarak sunuyoruz
                    const opts = q.options.map((o, i) => ({ text: o, id: i }));
                    const shuffledOpts = shuffle([...opts]);
                    
                    shuffledOpts.forEach((o) => {
                        const btn = document.createElement('button');
                        btn.className = 'option-btn p-5 rounded-2xl text-left flex items-start gap-4';
                        btn.innerHTML = `<span class="text-amber-500 font-bold">â€¢</span> <span>${o.text}</span>`;
                        btn.onclick = () => this.handleAnswer(o.id, btn);
                        grid.appendChild(btn);
                    });
                }
                
                if(progBar) progBar.style.width = `${(this.currentGlobal / this.totalQ) * 100}%`;
                
                if(f50Btn) {
                    if (this.streak >= 3 && this.jokers.f50) {
                        f50Btn.className = 'bg-purple-600 px-6 py-3 rounded-xl text-sm font-bold shadow-lg joker-active';
                        if(f50Text) f50Text.innerText = "KullanÄ±ma HazÄ±r!";
                    } else {
                        f50Btn.className = 'joker-locked bg-purple-600 px-6 py-3 rounded-xl text-sm font-bold opacity-30 cursor-not-allowed';
                        if(f50Text) f50Text.innerText = this.jokers.f50 ? "3 seri gerekir" : "KullanÄ±ldÄ±";
                    }
                }
                
                this.setJokerStyle('joker-sensei', this.jokers.sensei);
                this.setJokerStyle('joker-skip', this.jokers.skip);
            }

            setJokerStyle(id, active) {
                const el = document.getElementById(id);
                if (!el) return;
                if (active) {
                    el.classList.remove('opacity-30', 'cursor-not-allowed');
                } else {
                    el.classList.add('opacity-30', 'cursor-not-allowed');
                }
            }

            showCurrentHint() { 
                const b = this.gameData[this.beltIdx];
                const q = b.questions[this.qIdx];
                showSenseiMessage(q.hint, true); 
            }

            handleAnswer(selectedId, btn) {
                const b = this.gameData[this.beltIdx];
                const q = b.questions[this.qIdx];
                const corr = q.correct;
                
                if (selectedId === corr) {
                    btn.classList.add('correct'); 
                    this.streak++; 
                    this.currentGlobal++;
                    setTimeout(() => this.next(), 800);
                } else {
                    btn.classList.add('wrong');
                    // YanlÄ±ÅŸ cevapta doÄŸru olanÄ± bul ve gÃ¶ster (Burada id'ye gÃ¶re butonlarÄ± bulmak gerekir)
                    // Basitlik iÃ§in tÃ¼m butonlarda doÄŸru metni arÄ±yoruz
                    document.querySelectorAll('.option-btn').forEach((b_el) => { 
                        if(b_el.querySelector('span:last-child').innerText === q.options[corr]) {
                            b_el.classList.add('correct');
                        }
                    });
                    setTimeout(() => this.end(false), 1200);
                }
            }

            next() {
                this.qIdx++; 
                if (this.qIdx >= 5) { // KuÅŸak bitti
                    this.qIdx = 0; 
                    this.beltIdx++; 
                    this.renderTracker(); 
                }
                if (this.beltIdx >= this.gameData.length) {
                    this.end(true); 
                } else {
                    this.updateUI();
                }
            }

            useSensei() { 
                if (!this.jokers.sensei) return; 
                showSenseiMessage("Zihnini sakinleÅŸtir... Aikido bir dÃ¶vÃ¼ÅŸ deÄŸil, uyumdur. DoÄŸru seÃ§enek zihninde beliriyor."); 
                this.jokers.sensei = false; 
                this.updateUI(); 
            }

            use5050() {
                if (this.streak < 3 || !this.jokers.f50) return;
                const b = this.gameData[this.beltIdx];
                const q = b.questions[this.qIdx];
                const corrText = q.options[q.correct];
                let rem = 0;
                const btns = Array.from(document.querySelectorAll('.option-btn'));
                shuffle(btns).forEach(b_el => {
                    const optionText = b_el.querySelector('span:last-child').innerText;
                    if (optionText !== corrText && rem < 2) {
                        b_el.style.visibility = 'hidden'; rem++;
                    }
                });
                this.jokers.f50 = false; 
                this.updateUI();
            }

            useSkip() { 
                if (!this.jokers.skip) return; 
                this.jokers.skip = false; 
                this.currentGlobal++; 
                this.next(); 
            }

            end(win) {
                const ov = document.getElementById('overlay');
                const q = AIKIDO_QUOTES[Math.floor(Math.random() * AIKIDO_QUOTES.length)];
                
                const titleEl = document.getElementById('modal-title');
                const iconEl = document.getElementById('modal-icon');
                const quoteEl = document.getElementById('modal-quote-res');
                const authorEl = document.getElementById('modal-quote-author-res');
                const descEl = document.getElementById('modal-desc');

                if(quoteEl) quoteEl.innerText = `"${q.text}"`;
                if(authorEl) authorEl.innerText = q.author;
                
                if(ov) ov.classList.remove('hidden');
                
                if (win) {
                    if(iconEl) iconEl.innerText = "ğŸ¥‹";
                    if(titleEl) titleEl.innerText = "Siyah KuÅŸak KazandÄ±nÄ±z!";
                    if(descEl) descEl.innerText = "Tebrikler! 35 soruluk maratonu baÅŸarÄ±yla tamamladÄ±nÄ±z. Aikido yolunda bir ustasÄ±nÄ±z.";
                } else {
                    if(iconEl) iconEl.innerText = "ğŸ‹";
                    if(titleEl) titleEl.innerText = "Yolculuk Kesintiye UÄŸradÄ±";
                    if(descEl) descEl.innerText = "Hatalar yolun parÃ§asÄ±dÄ±r. Dojo'ya geri dÃ¶n ve zihnini tazele.";
                }
            }

            resetToStart() { 
                this.setRandomIntroQuote();
                const ov = document.getElementById('overlay');
                const app = document.getElementById('game-app');
                const intro = document.getElementById('intro-screen');
                if(ov) ov.classList.add('hidden'); 
                if(app) app.classList.add('hidden'); 
                if(intro) intro.classList.remove('hidden'); 
            }
        }

        const game = new AikidoGame();
        window.onload = () => game.setRandomIntroQuote();
    </script>
</body>
</html>
